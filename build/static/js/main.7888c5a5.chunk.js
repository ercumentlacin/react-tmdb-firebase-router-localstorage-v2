(this["webpackJsonpfinal-project"]=this["webpackJsonpfinal-project"]||[]).push([[0],{92:function(e,n,t){"use strict";t.r(n);var c,a,r,i,o,s,d,l,b,j,p,u,m,h,x,f,O,_=t(0),v=t.n(_),g=t(28),y=t.n(g),k=t(39),A=t(18),T=function(e){return null===e||void 0===e?void 0:e.reduce((function(e,n){return n.price+e}),0)},E=function(e,n){switch(n.type){case"ADD_TO_BASKET":return Object(A.a)(Object(A.a)({},e),{},{basket:[].concat(Object(k.a)(e.basket),[n.item])});case"REMOVE_FROM_BASKET":var t=e.basket.findIndex((function(e){return e.id===n.id})),c=Object(k.a)(e.basket);return t>=0?c.splice(t,1):console.warn("Cant remove product (id: ".concat(n.id,") as its not in basket!")),Object(A.a)(Object(A.a)({},e),{},{basket:c});case"SET_USER":return Object(A.a)(Object(A.a)({},e),{},{user:n.user});case"EMPTY_BASKET":return Object(A.a)(Object(A.a)({},e),{},{basket:[]});default:return e}},N=t(1),P=Object(_.createContext)(),S=function(e){var n=e.reducer,t=e.initialState,c=e.children;return Object(N.jsx)(P.Provider,{value:Object(_.useReducer)(n,t),children:c})},C=function(){return Object(_.useContext)(P)},w=t(8),R=t(10),D=t(9),I=t(4),Y=t(5),B={App:Y.a.div(c||(c=Object(I.a)(["\n  * {\n    box-sizing: border-box;\n  }\n  display: flex;\n\n  header + section {\n    flex: 1;\n  }\n  a {\n    color: white;\n    transition: all 250ms ease;\n    text-decoration: none;\n  }\n  a:hover {\n    color: #ffe852;\n  }\n"])))},M=(t(64),t(30)),G=(t(65),t(67),{apiKey:"AIzaSyCAvbCyjva6Eq4Cx3H2xeD-Cz9YgJlNYtE",authDomain:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_KEY:"AIzaSyCAvbCyjva6Eq4Cx3H2xeD-Cz9YgJlNYtE",REACT_APP_APP_ID:"1:46962422545:web:97db3e7f23db96536152b0",REACT_APP_AUTH_DOMAIN_:"react-ecommerce-aae81.firebaseapp.com",REACT_APP_DATABASE_URL:"https://react-ecommerce-aae81-default-rtdb.firebaseio.com",REACT_APP_PROJECT_ID:"react-ecommerce-aae81",REACT_APP_STORAGE_BUCKET:"react-ecommerce-aae81.appspot.com",REACT_APP_STRAPI_API:"pk_test_51IQvOYGZGX43o4mGGFC9MDkRfzsxlGBuX9Ra5SDJny2N33EDsP1BlmRPvs1odsWYNkThSNQdxeTUTeYehc0Nttnh00lstLiNvk",REACT_APP_STRAPI_SECRET:"sk_test_51IQvOYGZGX43o4mGhEWMTCu9V8YjAMocbDnOD2PBOMsKJ0aY7vThCvHV6CddtTFyQLIAQiuL5uLqAQwbPNXpVsKm00c6TKX8Y5",REACT_APP_TMDB_API:"a31f5c65ca60ed6c9818a95ef8987081"}).REACT_APP_AUTH_DOMAIN,databaseURL:"https://react-ecommerce-aae81-default-rtdb.firebaseio.com",projectId:"react-ecommerce-aae81",storageBucket:"react-ecommerce-aae81.appspot.com",messagingSenderId:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_KEY:"AIzaSyCAvbCyjva6Eq4Cx3H2xeD-Cz9YgJlNYtE",REACT_APP_APP_ID:"1:46962422545:web:97db3e7f23db96536152b0",REACT_APP_AUTH_DOMAIN_:"react-ecommerce-aae81.firebaseapp.com",REACT_APP_DATABASE_URL:"https://react-ecommerce-aae81-default-rtdb.firebaseio.com",REACT_APP_PROJECT_ID:"react-ecommerce-aae81",REACT_APP_STORAGE_BUCKET:"react-ecommerce-aae81.appspot.com",REACT_APP_STRAPI_API:"pk_test_51IQvOYGZGX43o4mGGFC9MDkRfzsxlGBuX9Ra5SDJny2N33EDsP1BlmRPvs1odsWYNkThSNQdxeTUTeYehc0Nttnh00lstLiNvk",REACT_APP_STRAPI_SECRET:"sk_test_51IQvOYGZGX43o4mGhEWMTCu9V8YjAMocbDnOD2PBOMsKJ0aY7vThCvHV6CddtTFyQLIAQiuL5uLqAQwbPNXpVsKm00c6TKX8Y5",REACT_APP_TMDB_API:"a31f5c65ca60ed6c9818a95ef8987081"}).REACT_APP_MESSAG\u0130NG_SENDER_ID,appId:"1:46962422545:web:97db3e7f23db96536152b0"}),K=M.a.initializeApp(G).firestore(),L=M.a.auth(),U=(M.a,Y.a.li(a||(a=Object(I.a)(["\n  list-style: none;\n  display: flex;\n\n  &:hover {\n    background-color: #212529;\n    transition: all 250ms ease;\n  }\n\n  a {\n    display: block;\n    width: 100%;\n    padding: 1rem 0;\n  }\n"])))),z=function(e){var n=e.url,t=e.name,c=e.icon,a=e.handleAuthentication;return Object(N.jsx)(U,{className:"nav__item",children:"Sign out"===t?Object(N.jsxs)(R.b,{onClick:a,to:"/",children:[c?Object(N.jsx)("i",{className:"".concat(c," mr-3")}):null,Object(N.jsx)("span",{children:t})]}):Object(N.jsxs)(R.b,{to:"".concat(n),children:[c?Object(N.jsx)("i",{className:"".concat(c," mr-3")}):null,Object(N.jsx)("span",{children:t})]})})},F=Y.a.span(r||(r=Object(I.a)(["\n  list-style: none;\n  display: flex;\n  padding-left: 30px;\n\n  &:hover {\n    background-color: #212529;\n    transition: all 250ms ease;\n  }\n\n  a {\n    display: block;\n    width: 100%;\n    padding: 1rem 0;\n  }\n\n  .order__icon {\n    position: relative;\n\n    &__count {\n      position: absolute;\n      background: white;\n      top: -1ch;\n      left: 1ch;\n      zoom: 1;\n      width: 20px;\n      height: 20px;\n      display: block;\n      padding-bottom: 1px;\n      line-height: 15px;\n      text-align: center;\n      border-radius: 10px;\n      color: black;\n      font-weight: 700;\n      border: 2px solid #121212;\n      font-size: 12px;\n    }\n  }\n"]))),H=function(e){var n=e.url,t=e.name,c=e.icon,a=e.orderCount;return Object(N.jsx)(F,{children:Object(N.jsxs)(R.b,{to:"".concat(n),children:[Object(N.jsx)("span",{className:"order",children:Object(N.jsxs)("span",{className:"order__icon",children:[c?Object(N.jsx)("i",{className:"".concat(c," mr-3")}):null,Object(N.jsx)("span",{className:"order__icon__count",children:a})]})}),Object(N.jsx)("span",{children:t})]})})},Q=Y.a.form(i||(i=Object(I.a)(["\n  display: flex;\n  align-items: center;\n  padding-left: 30px;\n\n  &:hover {\n    background-color: #212529;\n    transition: all 250ms ease;\n\n    i {\n      color: #ffe852;\n    }\n  }\n\n  button {\n    border: 0;\n    outline: 0;\n    padding: 0;\n    margin: 0;\n    background-color: transparent;\n    color: white;\n  }\n  input {\n    border: 0;\n    outline: 0;\n    width: 120px;\n    border-radius: 3px;\n    padding-left: 10px;\n  }\n"]))),W=function(e){var n=e.name,t=e.icon;return Object(N.jsxs)(Q,{className:"py-3",onSubmit:function(e){return e.preventDefault()},children:[Object(N.jsx)("button",{type:"submit",children:t?Object(N.jsx)("i",{className:"".concat(t," mr-3")}):null}),Object(N.jsx)("input",{type:"search",name:"".concat(n),id:"".concat(n),alt:"search"})]})},J={Navigation:Y.a.header(o||(o=Object(I.a)(["\n  min-height: 100vh;\n  width: 200px;\n  background-color: #121212;\n  color: white;\n\n  .nav {\n    display: flex;\n    flex-direction: column;\n\n    &__brand {\n      display: flex;\n      justify-content: center;\n      padding: 60px 0;\n      width: 100%;\n    }\n    ul {\n        padding-left: 0;\n      width: 100%;\n\n      li {\n        width: 100%;\n        display: flex;\n        align-items: center;\n        padding-left: 30px;\n      }\n    }\n  }\n"])))},X=function(){var e=C(),n=Object(w.a)(e,2),t=n[0],c=t.basket,a=t.user,r=(n[1],Object(D.f)());console.log(a);return Object(N.jsx)(J.Navigation,{children:Object(N.jsxs)("nav",{className:"nav",children:[Object(N.jsx)("div",{className:"nav__brand",children:Object(N.jsx)(R.b,{to:"/",children:"E-MovieDB"})}),Object(N.jsxs)("ul",{children:[Object(N.jsx)(z,{url:"/",name:"Home",icon:"fas fa-home"}),Object(N.jsx)(z,{url:"/popular",name:"Popular",icon:"fas fa-chart-line"}),Object(N.jsx)(W,{name:"search",icon:"fas fa-search"}),console.log(a),a?Object(N.jsx)(z,{url:"/sign-out",name:"Sign out",icon:"fas fa-sign-out-alt",handleAuthentication:function(){a&&(L.signOut(),r.push("/"))}}):Object(N.jsx)(z,{url:"/sign-in",name:"Sign in",icon:"fas fa-sign-in-alt"}),Object(N.jsx)(H,{url:"/orders",name:"Orders",icon:"fas fa-shopping-basket",orderCount:null===c||void 0===c?void 0:c.length})]}),Object(N.jsx)("div",{className:"border-top my-3 w-75 mx-auto bg-secondary"})]})})},V=Y.a.button(s||(s=Object(I.a)(["\n  border: none;\n  outline: none;\n  background-color: #ffc107;\n  display: inline-block;\n  padding: 3px 5px;\n  margin-top: 2rem;\n  border-radius: 3px;\n  font-weight: 700;\n  font-size: 12px;\n\n  &:hover {\n    background-color: #ffcf3d;\n  }\n"]))),q=function(e){var n=e.addToBasket;return Object(N.jsx)(V,{onClick:n,children:"Add to Basket"})},Z=Y.a.div(d||(d=Object(I.a)(["\n  display: flex;\n  flex-direction: column;\n  max-width: 220px;\n  align-items: center;\n  overflow: hidden;\n  position: relative;\n\n  .card__hover {\n    display: none;\n    font-size: 1rem;\n    color: #ffffff !important;\n    font-family: sans-serif;\n    text-align: center;\n    margin: auto;\n    z-index: 5;\n    top: 0;\n    left: 0;\n    bottom: 0;\n    right: 0;\n    height: 50px;\n  }\n\n  &:hover .card__hover,\n  &:focus .card__hover {\n    display: block;\n  }\n\n  &:hover .card__main,\n  &:focus .card__main {\n    -ms-transform: scale(1.2);\n    -moz-transform: scale(1.2);\n    -webkit-transform: scale(1.2);\n    -o-transform: scale(1.2);\n    transform: scale(1.2);\n    h4,\n    .card__price {\n      display: none;\n    }\n  }\n  &:hover .card__main:before,\n  &:focus .card__main:before {\n    display: block;\n    h4,\n    .card__price {\n      display: none;\n    }\n  }\n  .card__main {\n    background: ",';\n    width: 220px;\n    height: 330px;\n    border-radius: 3px;\n    padding: 8px;\n    transition: all 0.5s;\n\n    &:before {\n      content: "";\n      display: none;\n      height: 100%;\n      width: 100%;\n      position: absolute;\n      top: 0;\n      left: 0;\n      background-color: rgba(52, 73, 94, 0.75);\n    }\n  }\n\n  a {\n    display: flex;\n    flex-direction: column;\n\n    &:hover {\n      color: white;\n    }\n\n    h4 {\n      margin-top: auto;\n      font-size: 1rem;\n      margin-bottom: 0;\n    }\n  }\n'])),(function(e){return"linear-gradient(rgb(0 0 0 / 0%),rgb(0 0 0 / 25%)),url(https://www.themoviedb.org/t/p/w220_and_h330_face".concat(e.backdrop_path,") no-repeat top center")})),$=function(e){var n=e.movie,t=C(),c=Object(w.a)(t,2),a=(c[0].basket,c[1]);if(!n){var r="test";return Object(N.jsxs)(Z,{title:r,backdrop_path:"/fQq1FWp1rC89xDrRMuyFJdFUdMd.jpg",children:[Object(N.jsxs)(R.b,{className:"card__main",to:"/product",children:[Object(N.jsx)("h4",{children:r}),Object(N.jsxs)("span",{className:"card__price",children:["price: ",Object(N.jsxs)("strong",{children:[100," TL"]})]}),Object(N.jsx)("span",{className:"card__hover",children:r})]}),Object(N.jsx)(q,{onClick:l})]})}var i=n.backdrop_path,o=(n.popularity,n.release_date,n.title),s=n.vote_average,d=(n.vote_count,n.id),l=function(){alert("\xfcr\xfcn sepete eklendi"),a({type:"ADD_TO_BASKET",item:{id:d,title:o,backdrop_path:i,price:10*s}})};return Object(N.jsxs)(Z,{title:o,backdrop_path:i,children:[Object(N.jsxs)(R.b,{className:"card__main",to:"/product",children:[Object(N.jsx)("h4",{children:o}),Object(N.jsxs)("span",{className:"card__price",children:["price: ",Object(N.jsxs)("strong",{children:[10*s," TL"]})]}),Object(N.jsx)("span",{className:"card__hover",children:o})]}),Object(N.jsx)(q,{addToBasket:l})]})},ee=Y.a.h1(l||(l=Object(I.a)(["\n  padding: 40px 0;\n  color: #727272;\n"]))),ne=function(e){var n=e.name;return Object(N.jsx)(ee,{children:n})},te=Y.a.section(b||(b=Object(I.a)(["\n  background-color: #121212;\n\n  > section {\n    display: grid;\n    grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));\n    grid-row-gap: 2rem;\n    place-items: center;\n  }\n"]))),ce=function(){var e=Object(_.useState)([]),n=Object(w.a)(e,2),t=n[0],c=n[1];return Object(_.useEffect)((function(){fetch("https://api.themoviedb.org/3/movie/top_rated?api_key=".concat("a31f5c65ca60ed6c9818a95ef8987081")).then((function(e){return e.json()})).then((function(e){c(e.results)})).catch((function(e){console.error("Error:",e)}))}),[]),Object(N.jsxs)(te,{children:[Object(N.jsx)(ne,{name:"Home"}),Object(N.jsx)("section",{children:t.length>1&&(null===t||void 0===t?void 0:t.map((function(e){return Object(N.jsx)($,{movie:e},e.id)})))})]})},ae=(Y.a.div(j||(j=Object(I.a)(["\n  width: 70%;\n  padding-right: 1rem;\n  .order__card__main {\n    display: flex !important;\n    flex-direction: row !important;\n\n    img {\n      height: 200px;\n    }\n\n    .order__card__info {\n      color: #bfbfbf;\n      display: flex !important;\n      flex-direction: column !important;\n      margin-left: 2rem;\n    }\n  }\n"]))),Y.a.div(p||(p=Object(I.a)(["\n  padding: 0 1rem;\n  display: flex;\n  flex-direction: column;\n"])))),re=t(20),ie=t.n(re),oe=function(){var e=Object(D.f)(),n=C(),t=Object(w.a)(n,2),c=t[0].basket;t[1];return Object(N.jsxs)(ae,{className:"subtotal",children:[Object(N.jsx)(ie.a,{renderText:function(e){return Object(N.jsxs)(N.Fragment,{children:[Object(N.jsxs)("p",{children:["Subtotal (",null===c||void 0===c?void 0:c.length," items):",Object(N.jsxs)("strong",{children:[e," TL"]})]}),Object(N.jsxs)("small",{className:"subtotal__gift",children:[Object(N.jsx)("input",{type:"checkbox"})," This order contains a gift"]})]})},decimalScale:2,value:T(c),displayType:"text",thousandsSeparator:!0,prefix:""}),Object(N.jsx)("button",{onClick:function(n){return e.push("/payment")},children:"Proced to Checkout"})]})},se=Y.a.section(u||(u=Object(I.a)(["\n  background-color: #121212;\n  > .order__item {\n    display: flex !important;\n    justify-content: space-between;\n    flex-direction: row !important;\n    align-items: flex-start !important;\n    color: #bfbfbf;\n\n    .dropdown-divider {\n      height: 2px;\n      width: 100%;\n    }\n  }\n\n  > section {\n    display: flex !important;\n    flex-direction: column !important;\n    align-items: flex-start !important;\n    color: #bfbfbf;\n\n    .dropdown-divider {\n      height: 2px;\n      width: 100%;\n    }\n  }\n\n  button {\n    border: none;\n    outline: none;\n    background-color: #ffc107;\n    display: inline-block;\n    padding: 3px 0.5rem;\n    margin-bottom: 2rem;\n    border-radius: 3px;\n    font-weight: 700;\n    font-size: 12px;\n\n    &:hover {\n      background-color: #ffcf3d;\n    }\n  }\n\n  .order__item__list {\n    display: grid;\n    grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));\n    grid-row-gap: 2rem;\n    place-items: center;\n    width: 100%;\n  }\n"]))),de=t(97),le=Y.a.div(m||(m=Object(I.a)(["\n  button {\n    border: none;\n    outline: none;\n    background-color: #ffc107;\n    display: inline-block;\n    padding: 3px 0.5rem;\n    margin-bottom: 2rem;\n    border-radius: 3px;\n    font-weight: 700;\n    font-size: 12px;\n\n    &:hover {\n      background-color: #ffcf3d;\n    }\n  }\n"]))),be=function(e){var n=e.id,t=e.backdrop_path,c=e.title,a=e.price,r=C(),i=Object(w.a)(r,2),o=(i[0].basket,i[1]);return Object(N.jsxs)(le,{children:[Object(N.jsx)("img",{src:"https://www.themoviedb.org/t/p/w220_and_h330_face".concat(t),alt:c}),Object(N.jsxs)("div",{className:"orderProduct__info",children:[Object(N.jsx)("p",{className:"orderProduct__title",children:c}),Object(N.jsxs)("p",{className:"orderProduct__price",children:[Object(N.jsx)("strong",{children:a}),Object(N.jsx)("small",{children:"TL"})]}),Object(N.jsx)("button",{onClick:function(){o({type:"REMOVE_FROM_BASKET",id:n})},children:"Remove From Basket"})]})]})},je=function(){var e=C(),n=Object(w.a)(e,2),t=n[0],c=t.basket,a=t.user;n[1];return Object(N.jsxs)(se,{children:[Object(N.jsx)(ne,{name:"Orders"}),Object(N.jsxs)("h3",{className:"text-muted mb-4",children:["Hello, ",(null===a||void 0===a?void 0:a.email)||"it's time to sign up and shop."]}),Object(N.jsxs)("section",{className:"order__item",children:[Object(N.jsx)("div",{className:"order__item__list",children:null===c||void 0===c?void 0:c.map((function(e,n){return Object(N.jsx)(be,{id:e.id,title:e.title,price:e.price,backdrop_path:e.backdrop_path},n)}))}),Object(N.jsx)(oe,{})]}),Object(N.jsx)(de.a.Divider,{className:"my-3"})]})},pe=Y.a.div(h||(h=Object(I.a)(["\n  display: flex;\n  justify-content: center;\n  width: 100%;\n  align-items: center;\n  background: #121212;\n  color: white;\n\n  form {\n    width: 23rem;\n    padding: 3rem;\n    border-radius: 1rem;\n    background: #212529;\n    display: flex;\n    flex-direction: column;\n  }\n"]))),ue=function(){var e=Object(D.f)(),n=Object(_.useState)(""),t=Object(w.a)(n,2),c=t[0],a=t[1],r=Object(_.useState)(""),i=Object(w.a)(r,2),o=i[0],s=i[1],d=function(n){n.preventDefault(),L.signInWithEmailAndPassword(c,o).then((function(n){e.push("/")})).catch((function(e){return alert(e.message)}))};return Object(N.jsx)(pe,{children:Object(N.jsxs)("form",{onSubmit:d,children:[Object(N.jsx)("h3",{children:"Sign in"}),Object(N.jsxs)("div",{className:"form-group",children:[Object(N.jsx)("label",{children:"Email"}),Object(N.jsx)("input",{type:"email",className:"form-control",placeholder:"Enter email",value:c,onChange:function(e){return a(e.target.value)}})]}),Object(N.jsxs)("div",{className:"form-group",children:[Object(N.jsx)("label",{children:"Password"}),Object(N.jsx)("input",{type:"password",className:"form-control",placeholder:"Enter password",value:o,onChange:function(e){return s(e.target.value)}})]}),Object(N.jsx)("div",{className:"form-group",children:Object(N.jsxs)("div",{className:"custom-control custom-checkbox",children:[Object(N.jsx)("input",{type:"checkbox",className:"custom-control-input",id:"customCheck1"}),Object(N.jsx)("label",{className:"custom-control-label",htmlFor:"customCheck1",children:"Remember me"})]})}),Object(N.jsx)("button",{type:"submit",className:"btn btn-dark btn-lg btn-block",onClick:d,children:"Sign in"}),Object(N.jsxs)("p",{className:"forgot-password text-right mt-3",children:["Forgot ",Object(N.jsx)("a",{href:"#",children:"password?"})]}),Object(N.jsx)("button",{onClick:function(n){n.preventDefault(),L.createUserWithEmailAndPassword(c,o).then((function(n){n&&e.push("/")})).catch((function(e){return alert(e.message)}))},className:"btn btn-warning btn-lg btn-block",children:"Crate Account"})]})})},me=t(25),he=t.n(me),xe=t(38),fe=Y.a.div(x||(x=Object(I.a)(["\n  padding: 2rem;\n  background-color: #121212;\n  display: flex !important;\n  justify-content: space-between;\n  flex-direction: row !important;\n  align-items: flex-start !important;\n  color: #bfbfbf;\n  width: 100%;\n\n  .payment__container {\n    width: 100%;\n\n    h1 {\n      text-align: center;\n      font-size: 2rem;\n    }\n  }\n\n  .payment__section {\n    background: #212529;\n    padding: 1rem;\n    margin: 1rem 0;\n    border-radius: 1rem;\n  }\n\n  .payment__items {\n    display: grid;\n    grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));\n    grid-row-gap: 2rem;\n    place-items: center;\n  }\n\n  p {\n    margin: 0;\n  }\n  h3 {\n    border-bottom: 2px solid #bfbfbf26;\n    padding-bottom: 0.4rem;\n  }\n"]))),Oe=t(19),_e=t(55),ve=t.n(_e).a.create({baseURL:"http://localhost:5001/react-ecommerce-aae81/us-central1/api"}),ge=function(){var e=C(),n=Object(w.a)(e,2),t=n[0],c=t.basket,a=t.user,r=n[1],i=Object(D.f)(),o=Object(_.useState)(!1),s=Object(w.a)(o,2),d=s[0],l=s[1],b=Object(_.useState)(""),j=Object(w.a)(b,2),p=j[0],u=j[1],m=Object(_.useState)(null),h=Object(w.a)(m,2),x=h[0],f=h[1],O=Object(_.useState)(!0),v=Object(w.a)(O,2),g=v[0],y=v[1],k=Object(_.useState)(!0),A=Object(w.a)(k,2),E=A[0],P=A[1];Object(_.useEffect)((function(){(function(){var e=Object(xe.a)(he.a.mark((function e(){var n;return he.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ve({method:"post",url:"/payments/create?total=".concat(100*T(c))});case 2:n=e.sent,P(n.data.clientSecret);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[c]);var S=Object(Oe.useStripe)(),I=Object(Oe.useElements)();console.log("secret",E);var Y=function(){var e=Object(xe.a)(he.a.mark((function e(n){return he.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),u(!0),e.next=4,S.confirmCardPayment(E,{payment_method:{card:I.getElement(Oe.CardElement)}}).then((function(e){var n=e.paymentIntent;K.collection("users").doc(null===a||void 0===a?void 0:a.uid).collection("orders").doc(n.id).set({basket:c,amount:n.amount,created:n.created}),l(!0),f(null),u(!1),r({type:"EMPTY_BASKET"}),i.replace("/on-orders")}));case 4:e.sent;case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return Object(N.jsx)(fe,{className:"payment",children:Object(N.jsxs)("div",{className:"payment__container",children:[Object(N.jsxs)("h1",{children:["Checkout ( ",Object(N.jsxs)(R.b,{to:"/orders",children:[null===c||void 0===c?void 0:c.length," items"]})," )"]}),Object(N.jsxs)("div",{className:"payment__section",children:[Object(N.jsx)("div",{className:"payment__title",children:Object(N.jsx)("h3",{children:"Delivery Address"})}),Object(N.jsxs)("div",{className:"payment__address",children:[Object(N.jsx)("p",{children:null===a||void 0===a?void 0:a.email}),Object(N.jsx)("p",{children:"Atat\xfcrk Mahallesi"}),Object(N.jsx)("p",{children:"Ankara, T\xfcrkiye"})]})]}),Object(N.jsxs)("div",{className:"payment__section",children:[Object(N.jsx)("div",{className:"payment__title",children:Object(N.jsx)("h3",{children:"Review items and delivery"})}),Object(N.jsx)("div",{className:"payment__items",children:null===c||void 0===c?void 0:c.map((function(e,n){return Object(N.jsx)(be,{id:e.id,title:e.title,price:e.price,backdrop_path:e.backdrop_path},n)}))})]}),Object(N.jsxs)("div",{className:"payment__section",children:[Object(N.jsx)("div",{className:"payment__title",children:Object(N.jsx)("h3",{children:"Payment Method"})}),Object(N.jsx)("div",{className:"payment__details",children:Object(N.jsxs)("form",{onSubmit:Y,children:[Object(N.jsx)(Oe.CardElement,{onChange:function(e){y(e.empty),f(e.error?e.error.message:"")}}),Object(N.jsxs)("div",{className:"payment__priceContainer",children:[Object(N.jsx)(ie.a,{renderText:function(e){return Object(N.jsxs)("h3",{children:["Oerder Total: ",e||0," TL"]})},decimalScale:2,value:T(c),displayType:"text",thousandsSeparator:!0,prefix:""}),Object(N.jsx)("button",{className:"btn btn-warning",disabled:p||g||d,children:Object(N.jsx)("span",{children:p?Object(N.jsx)("p",{children:"Processing"}):"Buy Now"})})]}),x&&Object(N.jsx)("div",{children:x})]})})]})]})})},ye=t(56),ke=t(57),Ae=t.n(ke),Te=Y.a.div(f||(f=Object(I.a)(["\n  .onOrders {\n    margin-top: 1rem;\n    display: grid;\n    grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));\n    grid-row-gap: 2rem;\n    place-items: center;\n  }\n"]))),Ee=function(e){var n,t,c,a,r=e.order;return Object(N.jsxs)(Te,{children:[Object(N.jsx)("h2",{children:"Order"}),Object(N.jsx)("p",{children:Ae.a.unix(null===r||void 0===r||null===(n=r.data)||void 0===n?void 0:n.created).format("MMMM Do YYYY, h:mma")}),Object(N.jsx)("p",{className:"order__id",children:Object(N.jsx)("small",{children:r.id})}),Object(N.jsx)("div",{className:"onOrders",children:null===r||void 0===r||null===(t=r.data)||void 0===t||null===(c=t.basket)||void 0===c?void 0:c.map((function(e,n){return Object(N.jsx)(be,{id:e.id,title:e.title,price:e.price,backdrop_path:e.backdrop_path},n)}))}),Object(N.jsx)(ie.a,{renderText:function(e){return Object(N.jsxs)("h3",{children:["Order Total: ",e||0," TL"]})},decimalScale:2,value:(null===r||void 0===r||null===(a=r.data)||void 0===a?void 0:a.amount)/100,displayType:"text",thousandsSeparator:!0,prefix:""})]})},Ne=Y.a.div(O||(O=Object(I.a)(["\n  padding: 2rem;\n  background-color: #121212;\n  display: flex !important;\n  justify-content: space-between;\n  flex-direction: column !important;\n  align-items: flex-start !important;\n  color: #bfbfbf;\n  width: 100%;\n\n  .orders_order {\n    width: 100%;\n  }\n  p {\n    margin: 0;\n  }\n"]))),Pe=function(){var e=C(),n=Object(w.a)(e,2),t=n[0],c=(t.basket,t.user),a=(n[1],Object(_.useState)([])),r=Object(w.a)(a,2),i=r[0],o=r[1];return Object(_.useEffect)((function(){c?K.collection("users").doc(null===c||void 0===c?void 0:c.uid).collection("orders").orderBy("created","desc").onSnapshot((function(e){o(e.docs.map((function(e){return{id:e.id,data:e.data()}})))})):o([])}),[c]),Object(N.jsxs)(Ne,{children:[Object(N.jsx)("h1",{className:"mx-auto",children:"Your On-Orders"}),Object(N.jsx)("div",{className:"orders_order",children:null===i||void 0===i?void 0:i.map((function(e){return Object(N.jsx)(Ee,{order:e})}))})]})},Se=Object(ye.a)("".concat("pk_test_51IQvOYGZGX43o4mGGFC9MDkRfzsxlGBuX9Ra5SDJny2N33EDsP1BlmRPvs1odsWYNkThSNQdxeTUTeYehc0Nttnh00lstLiNvk")),Ce=function(){var e=C(),n=Object(w.a)(e,2),t=n[0].user,c=n[1];return Object(_.useEffect)((function(){L.onAuthStateChanged((function(e){console.log("THEN USER IS >>> ".concat(e),e),c(e?{type:"SET_USER",user:e}:{type:"SET_USER",user:null})}))}),[t]),Object(N.jsx)(B.App,{children:Object(N.jsxs)(R.a,{children:[Object(N.jsx)(X,{}),Object(N.jsxs)(D.c,{children:[Object(N.jsx)(D.a,{exact:!0,path:"/sign-in",component:ue}),Object(N.jsx)(D.a,{exact:!0,path:"/",component:ce}),Object(N.jsx)(D.a,{exact:!0,path:"/orders",component:je}),Object(N.jsx)(D.a,{exact:!0,path:"/on-orders",component:Pe}),Object(N.jsx)(D.a,{exact:!0,path:"/payment",children:Object(N.jsx)(Oe.Elements,{stripe:Se,children:Object(N.jsx)(ge,{})})})]})]})})};y.a.render(Object(N.jsx)(v.a.StrictMode,{children:Object(N.jsx)(S,{initialState:{basket:[],user:null},reducer:E,children:Object(N.jsx)(Ce,{})})}),document.getElementById("root"))}},[[92,1,2]]]);
//# sourceMappingURL=main.7888c5a5.chunk.js.map